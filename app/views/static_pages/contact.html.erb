<hr>
<table style="width:100%;">
	<tr><td>
<h1>User - <%= link_to @user.email, profile_show_path(id: @user) %></h1>
</td><td>
<p>Following:
	<%=  @user.following.count %>
</p>

<p>Followers:
	<%=  @user.followers.count %>
</p>
</td><td>
<% if current_user.id == @user.id %>

<% else %>
	<% if current_user.following?(@user) %>

			<%= form_with(model: current_user.active_relationships.find_by(followed_id: @user.id),
			html: { method: :delete }, local: true) do |f| %>

		<%= f.submit "Unfollow User", class: "btn" %>
		<% end %>
	<% else %>
		
			<%= form_with(model: current_user.active_relationships.build, local: true) do |f| %>
			<div><%= hidden_field_tag :followed_id, @user.id %></div>
		
		<%= f.submit "Follow User", class: "btn btn-primary" %>
		<% end %>
	<% end %>
<% end %>
</td>
</tr>
<tr>
<hr>
	<td>
<h2>Topic:-    <%= link_to @topic.name, user_topic_path(user_id: current_user.id,id: @topic.id ) %></h2>
</td><td>
<!-- <p>Your Total Following topics: -->
  <%#=  @user.followingtopic.count %>
<!-- </p> -->

<p>Total Followers of topic:
  <%=  @topic.followersoftopic.count %>
</p>     
</td><td>   
<% if current_user.followingtopic?(@topic) %>

      <%= form_with(model: current_user.active_relationships_topic.find_by(topic_added_id: @topic.id), html: { method: :delete }, local: true) do |f| %>

      <%= f.submit "Unfollow Topic", class: "btn" %>
      <% end %>

<% else %>  

      <%= form_with(model: current_user.active_relationships_topic.build, local: true) do |f| %>
          
          <%= hidden_field_tag   :topic_added_id, @topic.id %>
         
      <%= f.submit "Follow Topic", class: "btn btn-primary" %>
      <% end %>

<% end %>
</td></tr>
</table>
<hr><hr>
<h2>Question:
<%= @question.question %>
<br>
</h2>
<% a=1 %>
<% @answers.each do |ans| %>
<br><br>
<h4> Answer <%= a %>:- <%=  ans.answer %></h4>
<% a += 1 %>
<% end %>
<br>
<%= form_with(model: @answer, url: user_question_answers_path(current_user.id,question_id: @question.id),remote: true ) do |f| %>
			
<%= f.label :answer %>
<%= f.text_field :answer %>
<%= f.hidden_field :user_id, value: current_user.id %>
<%= f.hidden_field :question_id,  value: @question.id %>
<%= f.submit "add answer" %>

<% end %>